{% extends "::base.html.twig" %}
{% set id_clan = clan.id %}
{% set active = "" %}

 {% block title %}
     <title>{{ 'menu.my_player'|trans }}</title>
 {% endblock %}

{% block body %}


    <div class="container white-bg rounded-corners">
        <h2> {{ player.name }} <span>({{ player.updatedAt|date('U')|timeago }})</span></h2>

        <div class="well">
            <div class="row">
                <div class="col-md-7">
                    <div class="row">
                        <div class="col-md-5">

                            {% if player.picture.path is defined %}
                                <div class="row">
                                    <div class="col-md-12 ">
                                        <a rel="gallery-1 "  href="{{ asset('uploads/' ~ player.picture.path) }}" class="swipebox text-center" title="">
                                            <img  class="img-responsive " src="{{ asset('uploads/' ~ player.picture.path) }}" />
                                        </a>
                                    </div>
                                </div>

                            {% else %}
                                <img class="img-responsive" src="{{ asset('images/non_available_picture.jpg') }}" />
                            {% endif %}
                            {% if app.user.player.id is defined and app.user.player.id == player.id %}
                                <div class="row">
                                    <div class="col-xs-6">
                                        <div class="previous">
                                            {{ form_start(form) }}
                                            {{ form_errors(form) }}
                                            {{ form_errors(form.picture) }}
                                            {{ form_widget(form.picture, {'attr': {'class': 'filestyle'}}) }}
                                        </div>
                                    </div>
                                    <div class="col-xs-6">
                                        <div class="next">
                                            {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary'}}) }}
                                            {{ form_rest(form) }}
                                            {{ form_end(form) }}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-md-7">

                            <div class="row info ">
                                <div class="col-md-12">

                                    <table class="table supercell-font">
                                        <tbody>
                                        <tr>
                                            <th class="text-nowrap" scope="row"><i class="fa fa-area-chart"></i> {{ player.total }} </th>
                                            <td class="text-muted pull-right">{{ 'player.level'|trans }} <b>{{ player.level }} </b> </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <table class="table table-bordered table-striped">
                                    <tbody>
                                    <tr>
                                        <th class="text-nowrap" scope="row"><i class="fa fa-rocket"></i> {{ 'player.attackWon'|trans }}</th>
                                        <td class="text-muted"><b>{{ player.attackWon }} </b> </td>
                                    </tr>

                                    <tr>
                                        <th class="text-nowrap" scope="row"><i class="fa fa-trophy"></i>  {{ 'player.trophy'|trans }}</th>
                                        <td class="text-muted"><b>{{ player.trophy }} </b> </td>
                                    </tr>
                                    <tr>
                                        <th class="text-nowrap" scope="row"><i class="fa fa-arrow-circle-right"></i> {{ 'player.troopSent'|trans }}</th>
                                        <td class="text-muted"><b>{{ player.troopSent }} </b> </td>
                                    </tr>
                                    <tr>
                                        <th class="text-nowrap" scope="row"><i class="fa fa-arrows-alt"></i> {{ 'player.troopReceived'|trans }}</th>
                                        <td class="text-muted"><b>{{ player.troopReceived }} </b> </td>

                                    </tr>


                                    </tbody>
                                </table>

                            </div>





                        </div>
                    </div>

                    <h3>Information</h3>
                    <br>
                   IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                    IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE IMPORT PLAYER INTERFACE <br>
                </div>
                <div class="col-md-5">
                    {% if player.base.path is defined %}
                        <a rel="gallery-1"  href="{{ asset('uploads/' ~ player.base.path) }}" class="swipebox" title="">
                            <img  class="img-responsive"src="{{ asset('uploads/' ~ player.base.path) }}" />
                        </a>
                    {% else %}
                        <img class="img-responsive" src="{{ asset('images/non_available.jpg') }}" />
                    {% endif %}
                    <br>
                    {% if app.user.player.id is defined and app.user.player.id == player.id %}
                        <a class="btn btn-primary btn-block" href="{{ path('coc_player_edit', {'id': app.user.player.id ,'id_clan': clan.id }) }}"><b> {{ 'menu.edit_player'|trans }}</b></a>
                    {% endif %}

                </div>
            </div>

            <div class="row">


                    <div class="col-md-6">
                        <h3>Attacks</h3>
                        <canvas id="chart-attacks" height="100" width="400"></canvas>
                    </div>
                    <div class="col-md-6">
                        <h3>Troops</h3>
                        <canvas id="chart-activity" height="100" width="400"></canvas>
                    </div>


            </div>



        </div>

    </div>
    <footer>
        {{ render(controller('COCBundle:Default:displaySeason')) }}
    </footer>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/input_file.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/jchart.js') }}" type="text/javascript"></script>
    <script>
        var randomScalingFactor = function(){ return Math.round(Math.random()*100)};
        var attackChartData = {
            labels : ["1 - Jan", "2 - Jan", "1 - Feb", "2 - Feb",],
            datasets : [
                {
                    label: "Attacks",
                    fillColor : "rgba(220,220,220,0.2)",
                    strokeColor : "rgba(220,220,220,1)",
                    pointColor : "rgba(220,220,220,1)",
                    pointStrokeColor : "#fff",
                    pointHighlightFill : "#fff",
                    pointHighlightStroke : "rgba(220,220,220,1)",
                    
                    data : [78, 65, 47, 46]
                },

            ]

        }


        var activityChartData = {
            labels : ["1 - Jan", "2 - Jan", "1 - Feb", "2 - Feb",],
            datasets : [
                {
                    label: "Troops Sent",
                    strokeColor : "green",
                    pointColor : "green",
                    pointStrokeColor : "green",
                    pointHighlightStroke : "rgba(220,220,220,1)",
                    data : [1112, 1212, 847, 1046]

                },
                {
                    label: "Troops Received",
                    strokeColor : "red",
                    pointColor : "red",
                    pointStrokeColor : "red",
                    pointHighlightFill : "red",
                    pointHighlightStroke : "red",
                    data : [2112, 812, 1547, 446]
                }
            ]
        }

        window.onload = function(){
            var ctxAttacks = document.getElementById("chart-attacks").getContext("2d");
            window.myLine = new Chart(ctxAttacks).Line(attackChartData, {
//String - Colour of the grid lines
                scaleGridLineColor : "rgba(200,200,200,.05)",
                responsive: true,
                scaleOverride: true,
                scaleSteps: 10,
                scaleStepWidth: Math.ceil(120 / 10),
                scaleStartValue: 0,
                bezierCurve : false,
                scaleShowGridLines : true
            });

            var ctxActivity = document.getElementById("chart-activity").getContext("2d");
            window.myLine = new Chart(ctxActivity).Line(activityChartData, {
//String - Colour of the grid lines
                scaleGridLineColor : "rgba(200,200,200,.05)",
                responsive: true,
                scaleOverride: true,
                datasetFill : false,
                scaleSteps: 8,
                scaleStepWidth: 300,
                scaleStartValue: 0,
                bezierCurve : false,
                scaleShowGridLines : true
            });


        }


    </script>
{% endblock %}

